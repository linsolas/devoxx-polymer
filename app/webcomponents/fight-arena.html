<polymer-element name="fight-arena">
    <template>
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-4 col-lg-offset-1" id="fighter1">
            </div>

            <div class="col-lg-2 col-md-2 col-sm-2" style="text-align: center; vertical-align: middle;">
                <button type="button" class="btn btn-danger" on-click="{{ fight }}"><span class="glyphicon glyphicon-fire"></span> FIGHT</button>
                <pre id="results" style="border: solid 1px darkgrey; margin-top: 10px; width: 170px; height: 170px; overflow-y: auto; padding: 0; text-align: left;">{{ results }}</pre>
            </div>

            <div class="col-lg-4 col-md-4 col-sm-4" id="fighter2">
            </div>
        </div>
    </template>
    <script>
        var module = (function() {
            return {
                ready: function() {
                    this.opponents = [];
                    this.results = '';
                    this.fightCount = 0;
                },

                addFighter: function(elt) {
                    console.log('New fighter');
                    if (this.opponents.length == 0) {
                        this.$.fighter1.appendChild(elt);
                        this.opponents[0] = elt;
                    } else {
                        this.$.fighter2.appendChild(elt);
                        this.opponents[1] = elt;
                    }
                },

                fight: function() {
                    if ( Math.random() > 0.5 ) {
                        this.opponents[0].win();
                        this.opponents[1].loose();
                        this.results += 'LEFT won fight #' + ++this.fightCount + '\n';
                    } else {
                        this.opponents[0].loose();
                        this.opponents[1].win();
                        this.results += 'RIGHT won fight #' + ++this.fightCount + '\n';
                    }
                }
            };
        })();
        Polymer('fight-arena', module);
    </script>
</polymer-element>
