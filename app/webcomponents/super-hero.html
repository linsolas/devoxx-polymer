<polymer-element name="super-hero" attributes="heroId">
    <template>
        <div class="hero">
            <span class="profile">
                <img src="{{ hero.thumbnail.path + '.' + hero.thumbnail.extension }}">
            </span>

            <div class="info">
                <div class="desc">
                    <strong>{{ hero.name }}</strong>
                    <span>{{ hero.description }}</span>
                    <button type="button" class="btn btn-primary btn-sm hire" on-click="{{toggleHire}}"><span
                            class="glyphicon glyphicon-star"></span> {{hireText}}
                    </button>
                </div>
            </div>
        </div>
    </template>
    <script>
        var module = (function() {
            var fetch = function(id) {
                var storedHero = localStorage.getItem('hero.' + id);
                return JSON.parse(storedHero);
            };
            return {
                ready: function () {
                    var heroId = this.heroId;
                    this.hero = fetch(heroId);
                    this.fire();
                },
                toggleHire: function() {
                    if( this.hired ) {
                        this.fire();
                    } else {
                        this.hire();
                    }
                },
                fire: function() {
                    this.hired = false;
                    this.hireText = "Hire me!";
                },
                hire: function() {
                    this.hired = true;
                    this.hireText = "Fire me!";
                }
            }
        })();
        Polymer('super-hero', module);
    </script>
</polymer-element>
