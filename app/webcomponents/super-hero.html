<polymer-element name="super-hero" attributes="heroId,inArena">
    <template>
        <link rel="stylesheet" href="../styles/super-hero.css">
        <div class="col-lg-4">
            <div id="box" class="hero">
                <span class="profile">
                    <img src="{{ hero.thumbnail.path + '.' + hero.thumbnail.extension }}">
                </span>

                <div class="info">
                    <div class="desc">
                        <strong>{{ hero.name }}</strong>
                        <span>{{ hero.description }}</span>
                    </div>
                </div>
                <div class="fights">
                    {{ success }}% |
                    <span style="color: green">{{ wins }} <span class="glyphicon glyphicon-thumbs-up"></span></span> |
                    <span style="color: red">{{ losses }} <span class="glyphicon glyphicon-thumbs-down"></span></span>
                </div>
            </div>
        </div>
    </template>

    <script src="../scripts/super-hero.js"></script>

    <script>
        var module = (function() {
            var fetch = function(id) {
                var storedHero = localStorage.getItem('hero.' + id);
                return JSON.parse(storedHero);
            };
            return {
                ready: function () {
                    this.hero = fetch(this.heroId);
                    console.dir(this.hero);
                    this.wins = 0;
                    this.losses = 0;
                },
                get success() {
                    if (this.wins + this.losses == 0) {
                        return '-';
                    }
                    return Math.floor((this.wins / (this.wins + this.losses)) * 100);
                },

                win: function() {
                    this.animate(true);
                    this.wins++;
                    var animation = createAnimation(this.$.box);
                    document.timeline.play(animation);
                },
                loose: function() {
                    this.losses++;
                }
            }
        })();
        Polymer('super-hero', module);
    </script>
</polymer-element>
